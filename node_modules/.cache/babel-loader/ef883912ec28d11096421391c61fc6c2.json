{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      //当前页要展示的列表数据\n      tableData: [],\n      dialogFormVisible: false,\n      //添加表单是否可见\n      dialogFormVisible4Edit: false,\n      //编辑表单是否可见\n      formData: {},\n      //表单数据\n      rules: {\n        //校验规则\n        name: [{\n          required: true,\n          message: \"学生姓名为必填项\",\n          trigger: \"blur\"\n        }],\n        age: [{\n          required: true,\n          message: \"学生年龄为必填项\",\n          trigger: \"blur\"\n        }],\n        classes: [{\n          required: true,\n          message: \"学生班级为必填项\",\n          trigger: \"blur\"\n        }],\n        specialty: [{\n          required: true,\n          message: \"学生专业为必填项\",\n          trigger: \"blur\"\n        }],\n        address: [{\n          required: true,\n          message: \"学生家庭住址为必填项\",\n          trigger: \"blur\"\n        }]\n      },\n      pagination: {\n        //分页相关模型数据\n        currentPage: 1,\n        //当前页码\n        pageSize: 10,\n        //每页显示的记录数\n        total: 0,\n        //总记录数\n        id: \"\",\n        name: \"\",\n        age: \"\",\n        classes: \"\",\n        specialty: \"\"\n      }\n    };\n  },\n\n  //钩子函数，VUE对象初始化完成后自动执行\n  created() {\n    //调用查询全部数据的操作\n    this.getAll();\n  },\n\n  methods: {\n    getAll() {\n      this.$axios.get('http://localhost/student').then(res => {\n        this.tableData = res.data.data;\n      }, err => {\n        console.log('请求失败');\n      });\n    },\n\n    //切换页码\n    handleCurrentChange(currentPage) {\n      //修改页码值为当前选中的页码值\n      this.pagination.currentPage = currentPage; //执行查询\n\n      this.getAll();\n    },\n\n    //弹出添加窗口\n    handleCreate() {\n      this.dialogFormVisible = true;\n      this.resetForm();\n    },\n\n    //重置表单\n    resetForm() {\n      this.formData = {};\n    },\n\n    //添加\n    handleAdd() {\n      this.$axios.post(\"http://localhost/student\", this.formData); // axios\n      //   .post(\"http://localhost/student\", this.formData)\n      //   .then((res) => {\n      //     //判断当前操作是否成功\n      //     if (res.data.flag) {\n      //       //1.关闭弹层\n      //       this.dialogFormVisible = false;\n      //       this.$message.success(res.data.msg);\n      //     } else {\n      //       this.$message.error(res.data.msg);\n      //     }\n      //   })\n      //   .finally(() => {\n      //     //2.重新加载数据\n      //     this.getAll();\n      //   });\n    },\n\n    //取消\n    cancel() {\n      this.dialogFormVisible = false;\n      this.dialogFormVisible4Edit = false;\n      this.$message.info(\"当前操作取消\");\n    },\n\n    // 删除\n    handleDelete(row) {\n      this.$confirm(\"此操作永久删除当前信息，是否继续？\", \"提示\", {\n        type: \"info\"\n      }).then(() => {\n        axios.delete(`http://localhost/student/${row.id}`).then(res => {\n          if (res.data.flag) {\n            this.$message.success(\"删除成功\");\n          } else {\n            this.$message.error(\"数据同步失败，自动刷新\");\n          }\n        }).finally(() => {\n          //2.重新加载数据\n          this.getAll();\n        });\n      }).catch(() => {\n        this.$message.info(\"取消操作\");\n      });\n    },\n\n    //弹出编辑窗口\n    handleUpdate(row) {\n      console.log(row);\n      console.log(res.data);\n      axios.get(`http://localhost/student/${row.id}`).then(res => {\n        if (res.data.flag && res.data.data != null) {\n          this.dialogFormVisible4Edit = true;\n          this.formData = res.data.data;\n        } else {\n          this.$message.error(\"数据同步失败，自动刷新\");\n        }\n      }).finally(() => {\n        //2.重新加载数据\n        this.getAll();\n      });\n    },\n\n    handleEdit(index, row) {}\n\n  }\n};","map":{"version":3,"mappings":"AAgOA;AACA;EACAA;IACA;MACA;MACAC,aAFA;MAGAC,wBAHA;MAGA;MACAC,6BAJA;MAIA;MACAC,YALA;MAKA;MACAC;QACA;QACAC,OACA;UAAAC;UAAAC;UAAAC;QAAA,CADA,CAFA;QAKAC;UAAAH;UAAAC;UAAAC;QAAA,EALA;QAMAE,UACA;UAAAJ;UAAAC;UAAAC;QAAA,CADA,CANA;QASAG,YACA;UAAAL;UAAAC;UAAAC;QAAA,CADA,CATA;QAYAI,UACA;UAAAN;UAAAC;UAAAC;QAAA,CADA;MAZA,CANA;MAsBAK;QACA;QACAC,cAFA;QAEA;QACAC,YAHA;QAGA;QACAC,QAJA;QAIA;QACAC,MALA;QAMAZ,QANA;QAOAI,OAPA;QAQAC,WARA;QASAC;MATA;IAtBA;EAkCA,CApCA;;EAqCA;EACAO;IACA;IACA;EACA,CAzCA;;EA2CAC;IACAC;MACA,iDACAC;QAAA;MAAA,CADA,EAEAC;QAAAC;MAAA,CAFA;IAIA,CANA;;IAQA;IACAC;MACA;MACA,0CAFA,CAGA;;MACA;IACA,CAdA;;IAgBA;IACAC;MACA;MACA;IACA,CApBA;;IAsBA;IACAC;MACA;IACA,CAzBA;;IA2BA;IACAC;MACA,4DADA,CAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IACA,CA9CA;;IAgDA;IACAC;MACA;MACA;MACA;IACA,CArDA;;IAuDA;IACAC;MACA;QACAC;MADA,GAGAC,IAHA,CAGA;QACAC,MACAC,MADA,CACA,oCADA,EAEAF,IAFA,CAEAV;UACA;YACA;UACA,CAFA,MAEA;YACA;UACA;QACA,CARA,EASAa,OATA,CASA;UACA;UACA;QACA,CAZA;MAaA,CAjBA,EAkBAC,KAlBA,CAkBA;QACA;MACA,CApBA;IAqBA,CA9EA;;IAgFA;IACAC;MACAb;MACAA;MACAS,MACAK,GADA,CACA,oCADA,EAEAN,IAFA,CAEAV;QACA;UACA;UACA;QACA,CAHA,MAGA;UACA;QACA;MACA,CATA,EAUAa,OAVA,CAUA;QACA;QACA;MACA,CAbA;IAcA,CAlGA;;IAmGAI,wBAEA;;EArGA;AA3CA","names":["data","tableData","dialogFormVisible","dialogFormVisible4Edit","formData","rules","name","required","message","trigger","age","classes","specialty","address","pagination","currentPage","pageSize","total","id","created","methods","getAll","res","err","console","handleCurrentChange","handleCreate","resetForm","handleAdd","cancel","handleDelete","type","then","axios","delete","finally","catch","handleUpdate","get","handleEdit"],"sourceRoot":"src/components","sources":["StuMenu.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"filter-container\">\r\n      <el-input\r\n        placeholder=\"学生姓名\"\r\n        v-model=\"pagination.name\"\r\n        style=\"width: 200px\"\r\n        class=\"filter-item\"\r\n      ></el-input>\r\n      <el-input\r\n        placeholder=\"学生年龄\"\r\n        v-model=\"pagination.age\"\r\n        style=\"width: 200px\"\r\n        class=\"filter-item\"\r\n      ></el-input>\r\n      <el-input\r\n        placeholder=\"学生年级\"\r\n        v-model=\"pagination.classes\"\r\n        style=\"width: 200px\"\r\n        class=\"filter-item\"\r\n      ></el-input>\r\n      <el-input\r\n        placeholder=\"学生专业\"\r\n        v-model=\"pagination.specialty\"\r\n        style=\"width: 200px\"\r\n        class=\"filter-item\"\r\n      ></el-input>\r\n      <el-input\r\n        placeholder=\"学生住址\"\r\n        v-model=\"pagination.address\"\r\n        style=\"width: 200px\"\r\n        class=\"filter-item filter-item2\"\r\n      ></el-input>\r\n      <el-button @click=\"getAll()\" class=\"dalfBut\">查询</el-button>\r\n      <el-button type=\"primary\" class=\"butT\" @click=\"handleCreate()\"\r\n        >新建</el-button\r\n      >\r\n    </div>\r\n\r\n    <div class=\"div-line\"></div>\r\n\r\n    <el-table :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column align=\"center\" prop=\"id\" label=\"序号\" width=\"220\">\r\n        <template slot-scope=\"scope\">\r\n          <span style=\"margin-left: 10px\">{{ scope.row.id }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" prop=\"name\" label=\"姓名\" width=\"380\">\r\n        <template slot-scope=\"scope\">\r\n          <el-popover trigger=\"hover\" placement=\"top\" prop=\"address\">\r\n            <p>姓名: {{ scope.row.name }}</p>\r\n            <p>家庭住址: {{ scope.row.address }}</p>\r\n            <div slot=\"reference\" class=\"name-wrapper\">\r\n              <el-tag size=\"medium\">{{ scope.row.name }}</el-tag>\r\n            </div>\r\n          </el-popover>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" prop=\"age\" label=\"年龄\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.age }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" prop=\"classes\" label=\"班级\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.classes }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" prop=\"specialty\" label=\"专业\" width=\"300\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ scope.row.specialty }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button size=\"mini\" @click=\"handleUpdate(scope.row)\"\r\n            >编辑</el-button\r\n          >\r\n          <el-button\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"handleDelete(scope.row)\"\r\n            >删除</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!--分页组件-->\r\n    <div class=\"pagination-container\">\r\n      <el-pagination\r\n        class=\"pagiantion\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pagination.currentPage\"\r\n        :page-size=\"pagination.pageSize\"\r\n        layout=\"total, prev, pager, next, jumper\"\r\n        :total=\"pagination.total\"\r\n      >\r\n      </el-pagination>\r\n    </div>\r\n    <!-- 新增标签弹层 -->\r\n    <div class=\"add-form\">\r\n      <el-dialog title=\"新增学生\" :visible.sync=\"dialogFormVisible\">\r\n        <el-form\r\n          ref=\"dataAddForm\"\r\n          :model=\"formData\"\r\n          :rules=\"rules\"\r\n          label-position=\"right\"\r\n          label-width=\"100px\"\r\n        >\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生姓名\" prop=\"name\">\r\n                <el-input v-model=\"formData.name\" />\r\n              </el-form-item>\r\n            </el-col>\r\n\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生年龄\" prop=\"age\">\r\n                <el-input v-model=\"formData.age\" />\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生班级\" prop=\"classes\">\r\n                <el-input v-model=\"formData.classes\" ></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生专业\" prop=\"specialty\">\r\n                <el-input\r\n                  v-model=\"formData.specialty\"\r\n                ></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <el-row>\r\n            <el-col :span=\"24\">\r\n              <el-form-item label=\"学生地址\" prop=\"address\">\r\n                <el-input v-model=\"formData.address\" type=\"textarea\"></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </el-form>\r\n\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"cancel()\">取消</el-button>\r\n\r\n          <el-button type=\"primary\" @click=\"handleAdd()\">确定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n\r\n    <!-- 编辑标签弹层 -->\r\n    <div class=\"add-form\">\r\n      <el-dialog title=\"编辑检查项\" :visible.sync=\"dialogFormVisible4Edit\">\r\n        <el-form\r\n          ref=\"dataEditForm\"\r\n          :model=\"formData\"\r\n          :rules=\"rules\"\r\n          label-position=\"right\"\r\n          label-width=\"100px\"\r\n        >\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生姓名\" prop=\"name\">\r\n                <el-input v-model=\"formData.name\" align=\"center\" />\r\n              </el-form-item>\r\n            </el-col>\r\n\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生年龄\" prop=\"age\">\r\n                <el-input v-model=\"formData.age\" align=\"center\" />\r\n              </el-form-item> </el-col\r\n            >\r\n          </el-row>\r\n\r\n          <el-row>\r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生班级\" prop=\"classes\">\r\n                <el-input\r\n                  v-model=\"formData.classes\"\r\n                  align=\"center\"\r\n                ></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n         \r\n            <el-col :span=\"12\">\r\n              <el-form-item label=\"学生专业\" prop=\"specialty\">\r\n                <el-input\r\n                  v-model=\"formData.specialty\"\r\n                  align=\"center\"\r\n                ></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n\r\n          <el-row>\r\n            <el-col :span=\"24\">\r\n              <el-form-item label=\"学生地址\" prop=\"address\">\r\n                <el-input\r\n                  v-model=\"formData.address\"\r\n                  type=\"textarea\"\r\n                  align=\"center\"\r\n                ></el-input>\r\n              </el-form-item>\r\n            </el-col>\r\n          </el-row>\r\n        </el-form>\r\n\r\n        <div slot=\"footer\" class=\"dialog-footer\">\r\n          <el-button @click=\"cancel()\">取消</el-button>\r\n\r\n          <el-button type=\"primary\" @click=\"handleEdit()\">确定</el-button>\r\n        </div>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      //当前页要展示的列表数据\r\n      tableData: [],\r\n      dialogFormVisible: false, //添加表单是否可见\r\n      dialogFormVisible4Edit: false, //编辑表单是否可见\r\n      formData: {}, //表单数据\r\n      rules: {\r\n        //校验规则\r\n        name: [\r\n          { required: true, message: \"学生姓名为必填项\", trigger: \"blur\" },\r\n        ],\r\n        age: [{ required: true, message: \"学生年龄为必填项\", trigger: \"blur\" }],\r\n        classes: [\r\n          { required: true, message: \"学生班级为必填项\", trigger: \"blur\" },\r\n        ],\r\n        specialty: [\r\n          { required: true, message: \"学生专业为必填项\", trigger: \"blur\" },\r\n        ],\r\n        address: [\r\n          { required: true, message: \"学生家庭住址为必填项\", trigger: \"blur\" },\r\n        ],\r\n      },\r\n      pagination: {\r\n        //分页相关模型数据\r\n        currentPage: 1, //当前页码\r\n        pageSize: 10, //每页显示的记录数\r\n        total: 0, //总记录数\r\n        id: \"\",\r\n        name: \"\",\r\n        age: \"\",\r\n        classes: \"\",\r\n        specialty: \"\",\r\n      },\r\n    };\r\n  },\r\n  //钩子函数，VUE对象初始化完成后自动执行\r\n  created() {\r\n    //调用查询全部数据的操作\r\n    this.getAll();\r\n  },\r\n\r\n  methods: {\r\n    getAll() {\r\n        this.$axios.get('http://localhost/student').then(\r\n        (res) => {this.tableData = res.data.data;},\r\n        (err) => {console.log('请求失败')}\r\n        )      \r\n    },\r\n\r\n    //切换页码\r\n    handleCurrentChange(currentPage) {\r\n      //修改页码值为当前选中的页码值\r\n      this.pagination.currentPage = currentPage;\r\n      //执行查询\r\n      this.getAll();\r\n    },\r\n\r\n    //弹出添加窗口\r\n    handleCreate() {\r\n      this.dialogFormVisible = true;\r\n      this.resetForm();\r\n    },\r\n\r\n    //重置表单\r\n    resetForm() {\r\n      this.formData = {};\r\n    },\r\n\r\n    //添加\r\n    handleAdd() {\r\n      this.$axios.post(\"http://localhost/student\", this.formData);\r\n      // axios\r\n      //   .post(\"http://localhost/student\", this.formData)\r\n      //   .then((res) => {\r\n      //     //判断当前操作是否成功\r\n      //     if (res.data.flag) {\r\n      //       //1.关闭弹层\r\n      //       this.dialogFormVisible = false;\r\n      //       this.$message.success(res.data.msg);\r\n      //     } else {\r\n      //       this.$message.error(res.data.msg);\r\n      //     }\r\n      //   })\r\n      //   .finally(() => {\r\n      //     //2.重新加载数据\r\n      //     this.getAll();\r\n      //   });\r\n    },\r\n\r\n    //取消\r\n    cancel() {\r\n      this.dialogFormVisible = false;\r\n      this.dialogFormVisible4Edit = false;\r\n      this.$message.info(\"当前操作取消\");\r\n    },\r\n\r\n    // 删除\r\n    handleDelete(row) {\r\n      this.$confirm(\"此操作永久删除当前信息，是否继续？\", \"提示\", {\r\n        type: \"info\",\r\n      })\r\n        .then(() => {\r\n          axios\r\n            .delete(`http://localhost/student/${row.id}`)\r\n            .then((res) => {\r\n              if (res.data.flag) {\r\n                this.$message.success(\"删除成功\");\r\n              } else {\r\n                this.$message.error(\"数据同步失败，自动刷新\");\r\n              }\r\n            })\r\n            .finally(() => {\r\n              //2.重新加载数据\r\n              this.getAll();\r\n            });\r\n        })\r\n        .catch(() => {\r\n          this.$message.info(\"取消操作\");\r\n        });\r\n    },\r\n\r\n    //弹出编辑窗口\r\n    handleUpdate(row) {\r\n      console.log(row);\r\n      console.log(res.data);\r\n      axios\r\n        .get(`http://localhost/student/${row.id}`)\r\n        .then((res) => {\r\n          if (res.data.flag && res.data.data != null) {\r\n            this.dialogFormVisible4Edit = true;\r\n            this.formData = res.data.data;\r\n          } else {\r\n            this.$message.error(\"数据同步失败，自动刷新\");\r\n          }\r\n        })\r\n        .finally(() => {\r\n          //2.重新加载数据\r\n          this.getAll();\r\n        });\r\n    },\r\n    handleEdit(index, row) {\r\n      \r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.filter-container {\r\n  padding: 10px 0 15px 0;\r\n}\r\n.div-line {\r\n  width: auto;\r\n  height: 10px;\r\n  background-color: #409eff;\r\n}\r\n.filter-item {\r\n  margin-left: 10px;\r\n}\r\n.filter-item2 {\r\n  margin-right: 10px;\r\n}\r\n.pagination-container {\r\n  float: right;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}